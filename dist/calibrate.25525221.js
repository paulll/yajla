!function(){var t=function(t){return document.getElementById(t)},e=1200,a=5e4,o=["a","i","u","e","o","ka","ki","ku","ke","ko","sa","shi","su","se","so","ta","chi","tsu","te","to","na","ni","nu","ne","no","ha","hi","fu","he","ho","ma","mi","mu","me","mo","ya","yu","yo","ra","ri","ru","re","ro","wa","wi","we","wo","n","ga","gi","gu","ge","go","za","ji","zu","ze","zo","da","ji","zu","de","do","ba","bi","bu","be","bo","pa","pi","pu","pe","po","vu","kya","kyu","kyo","sha","shu","sho","cha","chu","cho","nya","nyu","nyo","hya","hyu","hyo","mya","myu","myo","rya","ryu","ryo","gya","gyu","gyo","ja","ju","jo","ja","ju","jo","bya","byu","byo","pya","pyu","pyo"].map((function(t){return{romanization:t,character:t}})),r={id:localStorage.getItem("yajla.id")||Math.random().toString(16).slice(2),question:localStorage.getItem("yajla.c.question")||"a",answer:localStorage.getItem("yajla.c.answer")||"a",level:+localStorage.getItem("yajla.c.level")||70,tests:+localStorage.getItem("yajla.c.tests")||0,totalTime:+localStorage.getItem("yajla.c.totalTime")||0,rounds:+localStorage.getItem("yajla.c.rounds")||0,statsPerChar:localStorage.getItem("yajla.c.statsPerChar")?JSON.parse(localStorage.getItem("yajla.c.statsPerChar")):{},window:localStorage.getItem("yajla.c.window")?JSON.parse(localStorage.getItem("yajla.c.window")):[],timeStarted:Date.now(),currentTestNotRanked:!0};window.state=r;var n=function(){fetch("https://box.paulll.cc/yajla-stats/",{method:"POST",mode:"cors",redirect:"follow",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id,type:"calibrate",stats:r.statsPerChar})}),localStorage.setItem("yajla.id",r.id),localStorage.setItem("yajla.c.question",r.question),localStorage.setItem("yajla.c.answer",r.answer),localStorage.setItem("yajla.c.level",r.level),localStorage.setItem("yajla.c.rounds",r.rounds),localStorage.setItem("yajla.c.tests",r.tests),localStorage.setItem("yajla.c.totalTime",r.totalTime),localStorage.setItem("yajla.c.statsPerChar",JSON.stringify(r.statsPerChar)),localStorage.setItem("yajla.c.window",JSON.stringify(r.window))},s=function(){r.tests&&r.rounds%10==0&&(r.totalTime/r.tests<=e&&r.level++);for(var t=function(){var t=o.slice(0,r.level),e=t.map((function(t){return e=t.character,r.statsPerChar.hasOwnProperty(e)?r.statsPerChar[e].totalTime/r.statsPerChar[e].tests:99999999;var e}));return function(t,e,a){if(t.length!==e.length)throw new RangeError("Chance: Length of array and weights must match");for(var o,r=0,n=0;n<e.length;++n){if(o=e[n],isNaN(o))throw new RangeError("Chance: All weights must be numbers");o>0&&(r+=o)}if(0===r)throw new RangeError("Chance: No valid entries in array weights");var s,i=Math.random()*r,l=0,u=-1;for(n=0;n<e.length;++n){if(l+=o=e[n],o>0){if(i<=l){s=n;break}u=n}n===e.length-1&&(s=u)}var c=t[s];return(a=void 0!==a&&a)&&(t.splice(s,1),e.splice(s,1)),c}(t,e)},a=t();a.character==r.question;)a=t();r.question=a.character,r.answer=a.romanization,r.timeStarted=Date.now(),r.currentTestNotRanked=!1,n()};t("input").focus(),t("input").addEventListener("blur",(function(){r.currentTestNotRanked=!0,t("input").focus()}));var i=function(){t("char").textContent=r.question,t("answer").textContent=r.answer,t("input").value="",t("char").classList.remove("animate"),t("char").offsetWidth,t("char").classList.add("animate"),t("stats").textContent="avg ".concat(Math.floor(r.totalTime/r.tests)||1e3,"ms\t level ").concat(r.level)};setTimeout(i,0);var l="",u=function(){l!=t("input").value&&(l=t("input").value),function(t,e){if(t.toLowerCase()==r.answer){if(!r.currentTestNotRanked){var o=Date.now()-r.timeStarted;if(o>7500)return;var s=r.tests+1>=a?r.window.shift():0;r.totalTime+=o-s,r.tests=r.tests+1>=a?a:r.tests+1,r.window.push(o),r.statsPerChar.hasOwnProperty(r.question)||(r.statsPerChar[r.question]={tests:0,totalTime:0}),r.statsPerChar[r.question].totalTime+=o,r.statsPerChar[r.question].tests++}return r.rounds++,n(),!0}}(t("input").value)&&(s(),i(),0)," "==t("input").value&&(r.currentTestNotRanked=!0,t("answer").style.opacity="1",t("input").value="")},c=function(){return setTimeout(u,0)};t("input").addEventListener("keydown",(function(e){t("answer").style.opacity="0",e.key&&" "==e.key&&(t("input").value=" ",e.preventDefault()),c()})),t("input").addEventListener("keypress",c),t("input").addEventListener("input",c)}();
//# sourceMappingURL=calibrate.25525221.js.map
